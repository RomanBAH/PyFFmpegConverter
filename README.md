# PyFFmpegConverter
Простой скрипт для пакетной конвертации видеотеки.

Позволяет перекодировать пакетно всю видиеотеку в формат mp4 h.265 (с ограничением битрейта видео 2000) с двухканальным аудио.
Для меня такой формат наиболее предпочтителен, но так как скрипт это просто надстройка над ffmpeg, вы легко можете поправить нужные параметры самостоятельно. 

Установка:
- Установить Ffmpeg full, самое простое, воспользоваться инсталлером, он пропишет правильную PATH.
https://github.com/icedterminal/ffmpeg-installer/releases/tag/5.1.0.20220727
Для проверки, что всё встало правильно, в cmd
```commandline
ffmpeg -version
```

- Установить сам Python. https://www.python.org/downloads/

- Установить нужные библиотеки, для этого в cmd от админа
```commandline
pip install get-video-properties
pip install six
pip install ffmpeg-python
pip install ffprobe-python
pip install ffmpeg-progress-yield
pip install tqdm
```


Настройка:

Достаточно указать через запятую пути, в переменной  **srcList**, поддреживаются как относительные пути, типа
```python
'../Video_01' # Значит Video_01 находится на уровень выше от срипта.
```
так и абсолютные пути виндовс, однако в этом случае, необходимо экранировать слеши, например так
```python
'E:\\Мультсериалы' # Пример абсолютного пути Win 
```

Работа срипта:

Работает просто, преребирает все пути указанные в **srcList**, по каждому пути сканирует все папки, проверяет все файлы, которые подходят по расширению из списка **extList**.
Если находит подходящий файл, проверяет его кодек, если кодек определён и отличается от hevc, то отправляет его на конвертацию. В ходе конвертации сверяется битрейт, если исходный битрейт ниже 2000к, то используется он, если выше, то битрейт устанавливается 2000к.   
В случае, если кодек не определён или кодек уже hevc, файл пропускается. 

На этом всё, предполагается запускать скрипт раз в сутки, в ночное время, чтобы держать всю видиеотеку в одном эффективном кодеке.  